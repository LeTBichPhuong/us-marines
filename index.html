<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>In tên trên áo</title>
    <style>
        body {
            background: #777;
            display: flex;
            justify-content: center;
            padding: 40px;
            font-family: Arial, sans-serif;
        }

        .product-preview {
            position: relative;
            width: 600px;
        }

        .product-preview img {
            width: 100%;
            display: block;
        }

        /* Lớp in chữ */
        .print-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div class="product-preview">
    <!-- Ảnh áo -->
    <img src="us-marines.jpg" alt="Áo">

    <!-- SVG in chữ -->
    <svg class="print-layer" viewBox="0 0 1024 1024">

        <!-- Patch nền -->
        <rect
            id="nameBg"
            x="110"
            y="521"
            rx="3"
            ry="3"
            width="140"
            height="23"
            fill="#565559"
            stroke="#dec27a"
            stroke-width="1"
        />

        <!-- Chữ -->
        <text
            id="printName"
            x="115"
            y="539"
            fill="#dec27a"
            font-size="17"
            font-weight="600"
            letter-spacing="0.2"
        >
        </text>

    </svg>
</div>

<script>
    const params = new URLSearchParams(window.location.search);
    const name = params.get('name');

    const text = document.getElementById('printName');
    const bg = document.getElementById('nameBg');

    // Giữ cố định vị trí patch
    const patchX = 110;
    const textX  = 115;
    const paddingX = 5;

    if (!name) {
        bg.style.display = 'none';
    } else {
        text.textContent = name.toUpperCase();

        requestAnimationFrame(() => {
            const box = text.getBBox();

            bg.setAttribute('x', patchX);
            bg.setAttribute('width', box.width + paddingX * 2);

            text.setAttribute('x', textX);
        });
    }
</script>



</body>
</html>
